import{j as i,L as x,a,r as h,A as N}from"./index.de8c4549.js";import{u as v}from"./useQuery.esm.2c971b74.js";const j=o=>{const{name:e,animal:t,breed:r,images:s,location:l,id:c}=o;let d="http://pets-images.dev-apis.com/pets/none.jpg";return s.length&&(d=s[0]),i(x,{to:`/details/${c}`,className:"pet",children:[a("div",{className:"image-container",children:a("img",{src:d,alt:e})}),i("div",{className:"info",children:[a("h1",{children:e}),a("h2",{children:`${t} \u2014 ${r} \u2014 ${l}`})]})]})},w=({pets:o})=>a("div",{className:"search",children:o.length?o.map(e=>a(j,{animal:e.animal,name:e.name,breed:e.breed,images:e.images,location:`${e.city}, ${e.state}`,id:e.id},e.id)):a("h1",{children:"No Pets Found"})});async function L({queryKey:o}){const e=o[1];if(!e)return[];const t=await fetch(`http://pets-v2.dev-apis.com/breeds?animal=${e}`);if(!t.ok)throw new Error(`breeds ${e} fetch not ok`);return t.json()}function P(o){var t,r;const e=v(["breeds",o],L);return[(r=(t=e==null?void 0:e.data)==null?void 0:t.breeds)!=null?r:[],e.status]}async function S({queryKey:o}){const{animal:e,location:t,breed:r}=o[1],s=await fetch(`http://pets-v2.dev-apis.com/pets?animal=${e}&location=${t}&breed=${r}`);if(!s.ok)throw new Error(`pet search not okay: ${e}, ${t}, ${r}`);return s.json()}const A=["bird","cat","dog","rabbit","reptile"],F=()=>{var u,p;const[o,e]=h.exports.useState({location:"",animal:"",breed:""}),[t]=h.exports.useContext(N),[r,s]=h.exports.useState(""),[l]=P(r),c=v(["search",o],S),d=(p=(u=c==null?void 0:c.data)==null?void 0:u.pets)!=null?p:[];return i("div",{className:"search-params",children:[i("form",{onSubmit:n=>{var b,g,f;n.preventDefault();const m=new FormData(n.target),$={animal:(b=m.get("animal"))!=null?b:"",breed:(g=m.get("breed"))!=null?g:"",location:(f=m.get("location"))!=null?f:""};e($)},children:[t?a("div",{className:"pet image-container",children:a("img",{src:t.images[0],alt:t.name})}):null,i("label",{htmlFor:"location",children:["Location",a("input",{id:"location",name:"location",placeholder:"Location"})]}),i("label",{htmlFor:"animal",children:["Animal",i("select",{id:"animal",name:"animal",onChange:n=>{s(n.target.value)},onBlur:n=>{s(n.target.value)},children:[a("option",{}),A.map(n=>a("option",{value:n,children:n},n))]})]}),i("label",{htmlFor:"breed",children:["Breed",i("select",{disabled:!l.length,id:"breed",name:"breed",children:[a("option",{}),l.map(n=>a("option",{value:n,children:n},n))]})]}),a("button",{children:"Submit"})]}),a(w,{pets:d})]})};export{F as default};
